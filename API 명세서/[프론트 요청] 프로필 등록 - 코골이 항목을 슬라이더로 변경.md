# 📄 프로필 등록 API 명세서 - 코골이 항목 5단계 슬라이더 변경

---

## ✅ 기능 개요

- 기존에는 "코골이 여부"를 Boolean 값으로 관리 (ON/OFF 스위치)
- 이제는 "코골이 정도"를 1~5 단계의 정수 값으로 입력받도록 변경
- 프론트 UI, API 요청 형식, 서버 수신 처리 모두 변경 필요

---

## 📦 API 정보

### 🔗 요청 URL

```
POST /profile
```

### 📁 서버 위치

- Flask 서버 루트: `/server/app.py`
- 해당 API 핸들러는 `@app.route("/profile", methods=["POST"])` 아래에 정의되어 있음
- 데이터는 MySQL의 `roommate_profiles` 테이블에 저장됨

---

## 📥 요청 형식 (Request Body)

### 변경 전 (기존 Boolean 방식)

```json
{
  "user_id": "taeji1212",
  "is_morning_person": true,
  "is_smoker": false,
  "snores": true,
  "hygiene_level": 4,
  "hall_type": "신관"
}
```

### 변경 후 (정수형 코골이 단계 도입)

```json
{
  "user_id": "taeji1212",
  "is_morning_person": true,
  "is_smoker": false,
  "snore_level": 3,
  "hygiene_level": 4,
  "hall_type": "신관"
}
```

- `snore_level`: 1(전혀 안 함) ~ 5(심함) 사이의 정수
- 기존 필드인 `snores`는 삭제되며, 이를 대체함

---

## 📤 응답 형식 (Response)

```json
{
  "status": "success",
  "message": "Profile saved"
}
```

- 상태 및 메시지를 반환 (기존과 동일)

---

## 🧱 서버 코드 수정 위치

- 파일: `/server/app.py`
- 기존 `@app.route("/profile", methods=["POST"])` 함수 내에서 `data["snores"]` → `data["snore_level"]`로 수정 필요
- MySQL 테이블(`roommate_profiles`)의 컬럼도 `snore_level INT`로 변경해야 함

---

## 🎨 프론트엔드 수정 정보

### 📁 Android UI 위치

- 파일 경로: `/app/ProfileActivity.kt`
- 함수명: `@Composable fun ProfileScreen(userId: String)`
- 기존 UI 코드:
  ```kotlin
  // 코골이 여부 스위치
  Row(...){
      Text("코골지 않음 (ON) / 코골이 (OFF)")
      Switch(checked = !snores, onCheckedChange = { snores = !it })
  }
  ```

### 🔁 수정 후 예시

```kotlin
Text("코골이 정도: ${snoreLevel.toInt()}")
Slider(
    value = snoreLevel,
    onValueChange = { snoreLevel = it },
    valueRange = 1f..5f,
    steps = 3,
    modifier = Modifier.fillMaxWidth()
)
```

- 상태 변수도 `snores: Boolean` → `snoreLevel: Float`로 변경

### 🚚 Retrofit 요청 모델 수정 필요

- 파일: `/app/ApiService.kt`
- 데이터 클래스: `ProfileRequest` 정의 변경

#### 변경 전:
```kotlin
val snores: Boolean,
```

#### 변경 후:
```kotlin
val snore_level: Int,
```

---

## 📌 요약

- 기존 Boolean 필드 `snores`를 제거하고 `snore_level`(1~5 정수)로 대체
- 서버 `app.py`, DB, Android UI, Retrofit 모델 모두 수정 필요
- 해당 UI는 `ProfileActivity.kt`의 `ProfileScreen()` 내부에 위치함
