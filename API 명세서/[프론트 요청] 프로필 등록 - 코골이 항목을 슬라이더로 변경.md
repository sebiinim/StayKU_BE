# ğŸ“„ í”„ë¡œí•„ ë“±ë¡ API ëª…ì„¸ì„œ - ì½”ê³¨ì´ í•­ëª© 5ë‹¨ê³„ ìŠ¬ë¼ì´ë” ë³€ê²½

---

## âœ… ê¸°ëŠ¥ ê°œìš”

- ê¸°ì¡´ì—ëŠ” "ì½”ê³¨ì´ ì—¬ë¶€"ë¥¼ Boolean ê°’ìœ¼ë¡œ ê´€ë¦¬ (ON/OFF ìŠ¤ìœ„ì¹˜)
- ì´ì œëŠ” "ì½”ê³¨ì´ ì •ë„"ë¥¼ 1~5 ë‹¨ê³„ì˜ ì •ìˆ˜ ê°’ìœ¼ë¡œ ì…ë ¥ë°›ë„ë¡ ë³€ê²½
- í”„ë¡ íŠ¸ UI, API ìš”ì²­ í˜•ì‹, ì„œë²„ ìˆ˜ì‹  ì²˜ë¦¬ ëª¨ë‘ ë³€ê²½ í•„ìš”

---

## ğŸ“¦ API ì •ë³´

### ğŸ”— ìš”ì²­ URL

```
POST /profile
```

### ğŸ“ ì„œë²„ ìœ„ì¹˜

- Flask ì„œë²„ ë£¨íŠ¸: `/server/app.py`
- í•´ë‹¹ API í•¸ë“¤ëŸ¬ëŠ” `@app.route("/profile", methods=["POST"])` ì•„ë˜ì— ì •ì˜ë˜ì–´ ìˆìŒ
- ë°ì´í„°ëŠ” MySQLì˜ `roommate_profiles` í…Œì´ë¸”ì— ì €ì¥ë¨

---

## ğŸ“¥ ìš”ì²­ í˜•ì‹ (Request Body)

### ë³€ê²½ ì „ (ê¸°ì¡´ Boolean ë°©ì‹)

```json
{
  "user_id": "taeji1212",
  "is_morning_person": true,
  "is_smoker": false,
  "snores": true,
  "hygiene_level": 4,
  "hall_type": "ì‹ ê´€"
}
```

### ë³€ê²½ í›„ (ì •ìˆ˜í˜• ì½”ê³¨ì´ ë‹¨ê³„ ë„ì…)

```json
{
  "user_id": "taeji1212",
  "is_morning_person": true,
  "is_smoker": false,
  "snore_level": 3,
  "hygiene_level": 4,
  "hall_type": "ì‹ ê´€"
}
```

- `snore_level`: 1(ì „í˜€ ì•ˆ í•¨) ~ 5(ì‹¬í•¨) ì‚¬ì´ì˜ ì •ìˆ˜
- ê¸°ì¡´ í•„ë“œì¸ `snores`ëŠ” ì‚­ì œë˜ë©°, ì´ë¥¼ ëŒ€ì²´í•¨

---

## ğŸ“¤ ì‘ë‹µ í˜•ì‹ (Response)

```json
{
  "status": "success",
  "message": "Profile saved"
}
```

- ìƒíƒœ ë° ë©”ì‹œì§€ë¥¼ ë°˜í™˜ (ê¸°ì¡´ê³¼ ë™ì¼)

---

## ğŸ§± ì„œë²„ ì½”ë“œ ìˆ˜ì • ìœ„ì¹˜

- íŒŒì¼: `/server/app.py`
- ê¸°ì¡´ `@app.route("/profile", methods=["POST"])` í•¨ìˆ˜ ë‚´ì—ì„œ `data["snores"]` â†’ `data["snore_level"]`ë¡œ ìˆ˜ì • í•„ìš”
- MySQL í…Œì´ë¸”(`roommate_profiles`)ì˜ ì»¬ëŸ¼ë„ `snore_level INT`ë¡œ ë³€ê²½í•´ì•¼ í•¨

---

## ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì • ì •ë³´

### ğŸ“ Android UI ìœ„ì¹˜

- íŒŒì¼ ê²½ë¡œ: `/app/ProfileActivity.kt`
- í•¨ìˆ˜ëª…: `@Composable fun ProfileScreen(userId: String)`
- ê¸°ì¡´ UI ì½”ë“œ:
  ```kotlin
  // ì½”ê³¨ì´ ì—¬ë¶€ ìŠ¤ìœ„ì¹˜
  Row(...){
      Text("ì½”ê³¨ì§€ ì•ŠìŒ (ON) / ì½”ê³¨ì´ (OFF)")
      Switch(checked = !snores, onCheckedChange = { snores = !it })
  }
  ```

### ğŸ” ìˆ˜ì • í›„ ì˜ˆì‹œ

```kotlin
Text("ì½”ê³¨ì´ ì •ë„: ${snoreLevel.toInt()}")
Slider(
    value = snoreLevel,
    onValueChange = { snoreLevel = it },
    valueRange = 1f..5f,
    steps = 3,
    modifier = Modifier.fillMaxWidth()
)
```

- ìƒíƒœ ë³€ìˆ˜ë„ `snores: Boolean` â†’ `snoreLevel: Float`ë¡œ ë³€ê²½

### ğŸšš Retrofit ìš”ì²­ ëª¨ë¸ ìˆ˜ì • í•„ìš”

- íŒŒì¼: `/app/ApiService.kt`
- ë°ì´í„° í´ë˜ìŠ¤: `ProfileRequest` ì •ì˜ ë³€ê²½

#### ë³€ê²½ ì „:
```kotlin
val snores: Boolean,
```

#### ë³€ê²½ í›„:
```kotlin
val snore_level: Int,
```

---

## ğŸ“Œ ìš”ì•½

- ê¸°ì¡´ Boolean í•„ë“œ `snores`ë¥¼ ì œê±°í•˜ê³  `snore_level`(1~5 ì •ìˆ˜)ë¡œ ëŒ€ì²´
- ì„œë²„ `app.py`, DB, Android UI, Retrofit ëª¨ë¸ ëª¨ë‘ ìˆ˜ì • í•„ìš”
- í•´ë‹¹ UIëŠ” `ProfileActivity.kt`ì˜ `ProfileScreen()` ë‚´ë¶€ì— ìœ„ì¹˜í•¨
